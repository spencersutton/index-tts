#!/bin/bash
# Post-checkout hook to sync dependencies with uv

# Arguments passed by git:
# $1 = ref of the previous HEAD
# $2 = ref of the new HEAD
# $3 = flag indicating whether it was a branch checkout (1) or file checkout (0)

PREV_HEAD=$1
NEW_HEAD=$2
BRANCH_CHECKOUT=$3

# Only run uv sync for branch checkouts
if [ "$BRANCH_CHECKOUT" = "1" ]; then
	echo "Running uv sync after checkout..."
	uv sync

	if [ $? -eq 0 ]; then
		echo "✅ Dependencies synced successfully."
	else
		echo "⚠️  uv sync failed. You may need to run it manually."
	fi
fi
