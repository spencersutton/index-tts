# pyright: reportAny=false, reportExplicitAny=false, reportUnknownParameterType=false, reportMissingParameterType=false
"""
This type stub file was generated by pyright.
"""

from typing import Any

import torch
import torch.utils.data
from torch import Tensor

from .env import AttrDict

MAX_WAV_VALUE = ...

def dynamic_range_compression(x, C=..., clip_val=...) -> Any: ...
def dynamic_range_decompression(x, C=...) -> Any: ...
def dynamic_range_compression_torch(x, C=..., clip_val=...) -> Tensor: ...
def dynamic_range_decompression_torch(x, C=...) -> Tensor: ...
def spectral_normalize_torch(magnitudes) -> Tensor: ...
def spectral_de_normalize_torch(magnitudes) -> Tensor: ...

mel_basis_cache = ...
hann_window_cache = ...

def mel_spectrogram(
    y: torch.Tensor,
    n_fft: int,
    num_mels: int,
    sampling_rate: int,
    hop_size: int,
    win_size: int,
    fmin: int,
    fmax: int = ...,
    center: bool = ...,
) -> torch.Tensor:
    """
    Calculate the mel spectrogram of an input signal.
    This function uses slaney norm for the librosa mel filterbank (using librosa.filters.mel) and uses Hann window for STFT (using torch.stft).

    Args:
        y (torch.Tensor): Input signal.
        n_fft (int): FFT size.
        num_mels (int): Number of mel bins.
        sampling_rate (int): Sampling rate of the input signal.
        hop_size (int): Hop size for STFT.
        win_size (int): Window size for STFT.
        fmin (int): Minimum frequency for mel filterbank.
        fmax (int): Maximum frequency for mel filterbank. If None, defaults to half the sampling rate (fmax = sr / 2.0) inside librosa_mel_fn
        center (bool): Whether to pad the input to center the frames. Default is False.

    Returns:
        torch.Tensor: Mel spectrogram.
    """

def get_mel_spectrogram(wav, h) -> Tensor:
    """
    Generate mel spectrogram from a waveform using given hyperparameters.

    Args:
        wav (torch.Tensor): Input waveform.
        h: Hyperparameters object with attributes n_fft, num_mels, sampling_rate, hop_size, win_size, fmin, fmax.

    Returns:
        torch.Tensor: Mel spectrogram.
    """

def get_dataset_filelist(a) -> tuple[list[str], list[str], list[Any]]: ...

class MelDataset(torch.utils.data.Dataset[object]):
    def __init__(
        self,
        training_files: list[str],
        hparams: AttrDict,
        segment_size: int,
        n_fft: int,
        num_mels: int,
        hop_size: int,
        win_size: int,
        sampling_rate: int,
        fmin: int,
        fmax: int | None,
        split: bool = ...,
        shuffle: bool = ...,
        device: str = ...,
        fmax_loss: int | None = ...,
        fine_tuning: bool = ...,
        base_mels_path: str = ...,
        is_seen: bool = ...,
    ) -> None: ...
    def __getitem__(self, index: int) -> tuple[torch.Tensor, torch.Tensor, str, torch.Tensor]: ...
    def __len__(self) -> int: ...
