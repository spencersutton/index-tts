from collections.abc import Callable
from typing import TypeVar

import uvicorn
from gradio.routes import App
from gradio.utils import ServerReloader
from uvicorn.config import Config

_ServerReloaderT = TypeVar("_ServerReloaderT", bound=ServerReloader)
INITIAL_PORT_VALUE = ...
TRY_NUM_PORTS = ...
LOCALHOST_NAME = ...
GRADIO_HOT_RELOAD = ...
should_watch = ...
GRADIO_WATCH_DIRS = ...
GRADIO_WATCH_MODULE_NAME = ...
GRADIO_WATCH_DEMO_NAME = ...
GRADIO_WATCH_DEMO_PATH = ...

class Server(uvicorn.Server):
    def __init__(
        self, config: Config, reloader: _ServerReloaderT | None = ..., watchfn: Callable[[_ServerReloaderT], None] = ...
    ) -> None: ...
    def install_signal_handlers(self):  # -> None:
        ...
    def run_in_thread(self):  # -> None:
        ...
    def close(self):  # -> None:
        ...

def start_server(
    app: App,
    server_name: str | None = ...,
    server_port: int | None = ...,
    ssl_keyfile: str | None = ...,
    ssl_certfile: str | None = ...,
    ssl_keyfile_password: str | None = ...,
) -> tuple[str, int, str, Server]: ...
