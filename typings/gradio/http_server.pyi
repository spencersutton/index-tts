"""
This type stub file was generated by pyright.
"""

from collections.abc import Callable
from typing import TYPE_CHECKING, TypeVar

import uvicorn
from gradio.routes import App
from gradio.utils import ServerReloader
from uvicorn.config import Config

if TYPE_CHECKING:
    _ServerReloaderT = TypeVar("_ServerReloaderT", bound=ServerReloader)
INITIAL_PORT_VALUE = ...
TRY_NUM_PORTS = ...
LOCALHOST_NAME = ...
GRADIO_HOT_RELOAD = ...
should_watch = ...
GRADIO_WATCH_DIRS = ...
GRADIO_WATCH_MODULE_NAME = ...
GRADIO_WATCH_DEMO_NAME = ...
GRADIO_WATCH_DEMO_PATH = ...

class Server(uvicorn.Server):
    def __init__(
        self, config: Config, reloader: _ServerReloaderT | None = ..., watchfn: Callable[[_ServerReloaderT], None] = ...
    ) -> None: ...
    def install_signal_handlers(self):  # -> None:
        ...
    def run_in_thread(self):  # -> None:
        ...
    def close(self):  # -> None:
        ...

def start_server(
    app: App,
    server_name: str | None = ...,
    server_port: int | None = ...,
    ssl_keyfile: str | None = ...,
    ssl_certfile: str | None = ...,
    ssl_keyfile_password: str | None = ...,
) -> tuple[str, int, str, Server]:
    """Launches a local server running the provided Interface
    Parameters:
        app: the FastAPI app object to run
        server_name: to make app accessible on local network, set this to "0.0.0.0". Can be set by environment variable GRADIO_SERVER_NAME.
        server_port: will start gradio app on this port (if available). Can be set by environment variable GRADIO_SERVER_PORT.
        auth: If provided, username and password (or list of username-password tuples) required to access the Blocks. Can also provide function that takes username and password and returns True if valid login.
        ssl_keyfile: If a path to a file is provided, will use this as the private key file to create a local server running on https.
        ssl_certfile: If a path to a file is provided, will use this as the signed certificate for https. Needs to be provided if ssl_keyfile is provided.
        ssl_keyfile_password: If a password is provided, will use this with the ssl certificate for https.

    Returns:
        server_name: the name of the server (default is "localhost")
        port: the port number the server is running on
        path_to_local_server: the complete address that the local server can be accessed at
        server: the server object that is a subclass of uvicorn.Server (used to close the server)
    """
    ...
