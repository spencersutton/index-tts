from collections.abc import Callable

import requests
from requests import Response
from requests.adapters import HTTPAdapter
from requests.models import PreparedRequest

from ._typing import HTTP_METHOD_T

"""Contains utilities to handle HTTP requests in Huggingface Hub."""
logger = ...
X_AMZN_TRACE_ID = ...
X_REQUEST_ID = ...
REPO_API_REGEX = ...

class UniqueRequestIdAdapter(HTTPAdapter):
    X_AMZN_TRACE_ID = ...
    def add_headers(self, request, **kwargs):  # -> None:
        ...
    def send(self, request: PreparedRequest, *args, **kwargs) -> Response: ...

class OfflineAdapter(HTTPAdapter):
    def send(self, request: PreparedRequest, *args, **kwargs) -> Response: ...

type BACKEND_FACTORY_T = Callable[[], requests.Session]
_GLOBAL_BACKEND_FACTORY: BACKEND_FACTORY_T = ...

def configure_http_backend(backend_factory: BACKEND_FACTORY_T = ...) -> None: ...
def get_session() -> requests.Session: ...
def reset_sessions() -> None: ...
def http_backoff(
    method: HTTP_METHOD_T,
    url: str,
    *,
    max_retries: int = ...,
    base_wait_time: float = ...,
    max_wait_time: float = ...,
    retry_on_exceptions: type[Exception] | tuple[type[Exception], ...] = ...,
    retry_on_status_codes: int | tuple[int, ...] = ...,
    **kwargs,
) -> Response: ...
def fix_hf_endpoint_in_url(url: str, endpoint: str | None) -> str: ...
def hf_raise_for_status(response: Response, endpoint_name: str | None = ...) -> None: ...

RANGE_REGEX = ...
