import dataclasses
import sys
from typing import Any

from .bytecode_transformation import Instruction

TERMINAL_OPCODES = ...
if (3, 12) <= sys.version_info < (3, 14): ...
JUMP_OPCODES = ...
JUMP_OPNAMES = ...
HASLOCAL = ...
HASFREE = ...
stack_effect = ...

def get_indexof(insts: list[Instruction]) -> dict[Instruction, int]: ...
def remove_dead_code(instructions: list[Instruction]) -> list[Instruction]: ...
def remove_pointless_jumps(instructions: list[Instruction]) -> list[Instruction]: ...
def propagate_line_nums(instructions: list[Instruction]) -> None: ...
def remove_extra_line_nums(instructions: list[Instruction]) -> None: ...

@dataclasses.dataclass
class ReadsWrites:
    reads: set[Any]
    writes: set[Any]
    visited: set[Any]

def livevars_analysis(instructions: list[Instruction], instruction: Instruction) -> set[Any]: ...

@dataclasses.dataclass
class FixedPointBox:
    value: bool = ...

@dataclasses.dataclass
class StackSize:
    low: int | float
    high: int | float
    fixed_point: FixedPointBox
    def zero(self) -> None: ...
    def offset_of(self, other: StackSize, n: int) -> None: ...
    def exn_tab_jump(self, depth: int) -> None: ...

def stacksize_analysis(instructions: list[Instruction]) -> int | float: ...
