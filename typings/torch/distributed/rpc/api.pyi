import collections
from typing import Any, TypeVar

from torch._C._distributed_rpc import PyRRef

__all__ = [
    "AllGatherStates",
    "RRef",
    "get_worker_info",
    "method_factory",
    "new_method",
    "remote",
    "rpc_async",
    "rpc_sync",
    "shutdown",
]
logger = ...
_ignore_rref_leak = ...
_default_pickler = ...

class AllGatherStates:
    def __init__(self) -> None: ...

_ALL_WORKER_NAMES: set[Any] = ...
_all_gather_dict_lock = ...
_all_gather_sequence_id: dict[str, int] = ...
_all_gather_sequence_id_to_states: collections.defaultdict = ...
_thread_local_var = ...

@_require_initialized
def shutdown(graceful=..., timeout=...) -> None: ...
@_require_initialized
def get_worker_info(worker_name=...) -> WorkerInfo: ...

T = TypeVar("T")

class RRef[T](PyRRef[T]): ...

def method_factory(method_name, docstring) -> Callable[..., Any]: ...
@_require_initialized
def remote(to, func, args=..., kwargs=..., timeout=...): ...
@_require_initialized
def rpc_sync(to, func, args=..., kwargs=..., timeout: float = ...) -> Any: ...
@_require_initialized
def rpc_async(to, func, args=..., kwargs=..., timeout=...) -> Future[Any]: ...
