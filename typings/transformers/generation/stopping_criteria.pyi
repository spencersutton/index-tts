"""
This type stub file was generated by pyright.
"""

import torch
from abc import ABC
from typing import Optional, Union
from ..tokenization_utils_base import PreTrainedTokenizerBase
from ..utils import add_start_docstrings

logger = ...
STOP_STRING_EMBEDDING_CACHE = ...
STOPPING_CRITERIA_INPUTS_DOCSTRING = ...

class StoppingCriteria(ABC):
    @add_start_docstrings(STOPPING_CRITERIA_INPUTS_DOCSTRING)
    def __call__(self, input_ids: torch.LongTensor, scores: torch.FloatTensor, **kwargs) -> torch.BoolTensor: ...

class MaxLengthCriteria(StoppingCriteria):
    def __init__(self, max_length: int, max_position_embeddings: Optional[int] = ...) -> None: ...
    @add_start_docstrings(STOPPING_CRITERIA_INPUTS_DOCSTRING)
    def __call__(self, input_ids: torch.LongTensor, scores: torch.FloatTensor, **kwargs) -> torch.BoolTensor: ...

class MaxTimeCriteria(StoppingCriteria):
    def __init__(self, max_time: float, initial_timestamp: Optional[float] = ...) -> None: ...
    @add_start_docstrings(STOPPING_CRITERIA_INPUTS_DOCSTRING)
    def __call__(self, input_ids: torch.LongTensor, scores: torch.FloatTensor, **kwargs) -> torch.BoolTensor: ...

class StopStringCriteria(StoppingCriteria):
    def __init__(self, tokenizer: PreTrainedTokenizerBase, stop_strings: Union[str, list[str]]) -> None: ...
    def clean_and_embed_tokens_with_cache(self, token_list, token_indices, tokenizer): ...
    @staticmethod
    def clean_tokenizer_vocab(tokenizer, static_prefix=...): ...
    @add_start_docstrings(STOPPING_CRITERIA_INPUTS_DOCSTRING)
    def __call__(self, input_ids: torch.LongTensor, scores: torch.FloatTensor, **kwargs) -> torch.Tensor: ...

class EosTokenCriteria(StoppingCriteria):
    def __init__(self, eos_token_id: Union[int, list[int], torch.Tensor]) -> None: ...
    @add_start_docstrings(STOPPING_CRITERIA_INPUTS_DOCSTRING)
    def __call__(self, input_ids: torch.LongTensor, scores: torch.FloatTensor, **kwargs) -> torch.BoolTensor: ...

class ConfidenceCriteria(StoppingCriteria):
    def __init__(self, assistant_confidence_threshold) -> None: ...
    def __call__(self, input_ids: torch.LongTensor, scores: torch.FloatTensor, **kwargs) -> torch.BoolTensor: ...

class StoppingCriteriaList(list):
    @add_start_docstrings(STOPPING_CRITERIA_INPUTS_DOCSTRING)
    def __call__(self, input_ids: torch.LongTensor, scores: torch.FloatTensor, **kwargs) -> torch.BoolTensor: ...
    @property
    def max_length(self) -> Optional[int]: ...

def validate_stopping_criteria(stopping_criteria: StoppingCriteriaList, max_length: int) -> StoppingCriteriaList: ...
