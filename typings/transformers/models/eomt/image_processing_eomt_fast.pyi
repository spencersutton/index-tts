"""
This type stub file was generated by pyright.
"""

import numpy as np
import torch
from typing import Optional
from ...image_processing_utils import BatchFeature
from ...image_processing_utils_fast import BaseImageProcessorFast, DefaultFastImageProcessorKwargs
from ...image_utils import ImageInput
from ...processing_utils import Unpack
from ...utils import auto_docstring, filter_out_non_signature_kwargs, is_torch_available, is_torchvision_available

if is_torch_available(): ...
if is_torchvision_available(): ...

class EomtImageProcessorFastKwargs(DefaultFastImageProcessorKwargs):
    do_split_image: bool
    do_pad: bool
    ignore_index: Optional[int] = ...

def get_target_size(size_dict: dict[str, int]) -> tuple[int, int]: ...
def reorder_patches_and_offsets(
    patches: list[torch.Tensor], offsets: list[list[int]]
) -> tuple[list[torch.Tensor], list[list[int]]]: ...

@auto_docstring
class EomtImageProcessorFast(BaseImageProcessorFast):
    resample = ...
    image_mean = ...
    image_std = ...
    size = ...
    default_to_square = ...
    do_resize = ...
    do_rescale = ...
    do_normalize = ...
    do_split_image = ...
    do_pad = ...
    ignore_index = ...
    valid_kwargs = EomtImageProcessorFastKwargs
    def __init__(self, **kwargs: Unpack[EomtImageProcessorFastKwargs]) -> None: ...
    @auto_docstring
    def preprocess(
        self,
        images: ImageInput,
        segmentation_maps: Optional[list[torch.Tensor]] = ...,
        instance_id_to_semantic_id: Optional[dict[int, int]] = ...,
        **kwargs: Unpack[EomtImageProcessorFastKwargs],
    ) -> BatchFeature: ...
    def merge_image_patches(
        self,
        segmentation_logits: torch.Tensor,
        patch_offsets: list[tuple[int, int, int]],
        target_sizes: list[tuple[int, int]],
        size: dict[str, int],
    ) -> list[torch.Tensor]: ...
    def unpad_image(
        self, segmentation_logits: torch.Tensor, target_sizes: list[tuple[int, int]], size: dict[str, int]
    ) -> list[torch.Tensor]: ...
    def post_process_semantic_segmentation(
        self, outputs, target_sizes: list[tuple[int, int]], size: Optional[dict[str, int]] = ...
    ) -> np.ndarray: ...
    def post_process_panoptic_segmentation(
        self,
        outputs,
        target_sizes: list[tuple[int, int]],
        threshold: float = ...,
        mask_threshold: float = ...,
        overlap_mask_area_threshold: float = ...,
        stuff_classes: Optional[list[int]] = ...,
        size: Optional[dict[str, int]] = ...,
    ): ...
    @filter_out_non_signature_kwargs()
    def post_process_instance_segmentation(
        self, outputs, target_sizes: list[tuple[int, int]], threshold: float = ..., size: Optional[dict[str, int]] = ...
    ): ...

__all__ = ["EomtImageProcessorFast"]
