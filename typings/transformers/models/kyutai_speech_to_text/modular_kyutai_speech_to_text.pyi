"""
This type stub file was generated by pyright.
"""

import numpy as np
import torch
import torch.nn as nn
from typing import Optional, Union
from ...cache_utils import Cache
from ...feature_extraction_utils import BatchFeature
from ...generation import GenerationMixin
from ...modeling_utils import PreTrainedModel
from ...utils import PaddingStrategy, TensorType
from ..encodec.feature_extraction_encodec import EncodecFeatureExtractor
from ..llama.modeling_llama import LlamaForCausalLM
from ..mimi.modeling_mimi import MimiConv1dPaddingCache
from ..moshi.modeling_moshi import MoshiModel, MoshiPreTrainedModel

logger = ...

class KyutaiSpeechToTextFeatureExtractor(EncodecFeatureExtractor):
    def __init__(
        self,
        audio_delay_seconds: Optional[float] = ...,
        audio_silence_prefix_seconds: Optional[float] = ...,
        **super_kwargs,
    ) -> None: ...
    def __call__(
        self,
        raw_audio: Union[np.ndarray, list[float], list[np.ndarray], list[list[float]]],
        padding: Optional[Union[bool, str, PaddingStrategy]] = ...,
        truncation: Optional[bool] = ...,
        max_length: Optional[int] = ...,
        return_tensors: Optional[Union[str, TensorType]] = ...,
        sampling_rate: Optional[int] = ...,
    ) -> BatchFeature: ...

class KyutaiSpeechToTextPreTrainedModel(MoshiPreTrainedModel): ...
class KyutaiSpeechToTextConv1dPaddingCache(MimiConv1dPaddingCache): ...

class KyutaiSpeechToTextEmbeddings(nn.Module):
    def __init__(self, config) -> None: ...
    def forward(self, input_ids): ...

class KyutaiSpeechToTextModel(MoshiModel):
    def __init__(self, config) -> None: ...

class KyutaiSpeechToTextForConditionalGeneration(LlamaForCausalLM, GenerationMixin, PreTrainedModel):
    _keep_in_fp32_modules_strict = ...
    def __init__(self, config) -> None: ...
    def forward(self, **super_kwargs): ...
    def prepare_inputs_for_generation(
        self,
        *args,
        audio_tokens: Optional[torch.LongTensor] = ...,
        input_values: Optional[torch.FloatTensor] = ...,
        padding_mask: Optional[torch.Tensor] = ...,
        audio_window_size: Optional[int] = ...,
        current_window: Optional[tuple[int, int]] = ...,
        encoder_past_key_values: Optional[Cache] = ...,
        padding_cache: Optional[KyutaiSpeechToTextConv1dPaddingCache] = ...,
        **kwargs,
    ): ...
    @classmethod
    def from_pretrained(cls, *args, **kwargs): ...
    def save_pretrained(self, *args, **kwargs): ...
    def generate(self, *args, **kwargs): ...

__all__ = [
    "KyutaiSpeechToTextPreTrainedModel",
    "KyutaiSpeechToTextModel",
    "KyutaiSpeechToTextForConditionalGeneration",
    "KyutaiSpeechToTextFeatureExtractor",
]
