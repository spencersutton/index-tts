"""
This type stub file was generated by pyright.
"""

import numpy as np
from collections.abc import Iterable
from contextlib import contextmanager
from dataclasses import dataclass
from multiprocessing import Pool
from typing import Optional, TYPE_CHECKING, TypeAlias, Union
from ...processing_utils import ProcessorMixin
from ...utils import ModelOutput
from pyctcdecode import BeamSearchDecoderCTC
from ...feature_extraction_utils import FeatureExtractionMixin
from ...tokenization_utils import PreTrainedTokenizerBase

logger = ...
if TYPE_CHECKING: ...
ListOfDict: TypeAlias = list[dict[str, Union[int, str]]]

@dataclass
class Wav2Vec2DecoderWithLMOutput(ModelOutput):
    text: Union[list[list[str]], list[str], str]
    logit_score: Union[list[list[float]], list[float], float] = ...
    lm_score: Union[list[list[float]], list[float], float] = ...
    word_offsets: Union[list[list[ListOfDict]], list[ListOfDict], ListOfDict] = ...

class Wav2Vec2ProcessorWithLM(ProcessorMixin):
    feature_extractor_class = ...
    tokenizer_class = ...
    def __init__(
        self,
        feature_extractor: FeatureExtractionMixin,
        tokenizer: PreTrainedTokenizerBase,
        decoder: BeamSearchDecoderCTC,
    ) -> None: ...
    def save_pretrained(self, save_directory): ...
    @classmethod
    def from_pretrained(cls, pretrained_model_name_or_path, **kwargs): ...
    @property
    def language_model(self): ...
    @staticmethod
    def get_missing_alphabet_tokens(decoder, tokenizer): ...
    def __call__(self, *args, **kwargs): ...
    def pad(self, *args, **kwargs): ...
    def batch_decode(
        self,
        logits: np.ndarray,
        pool: Optional[Pool] = ...,
        num_processes: Optional[int] = ...,
        beam_width: Optional[int] = ...,
        beam_prune_logp: Optional[float] = ...,
        token_min_logp: Optional[float] = ...,
        hotwords: Optional[Iterable[str]] = ...,
        hotword_weight: Optional[float] = ...,
        alpha: Optional[float] = ...,
        beta: Optional[float] = ...,
        unk_score_offset: Optional[float] = ...,
        lm_score_boundary: Optional[bool] = ...,
        output_word_offsets: bool = ...,
        n_best: int = ...,
    ): ...
    def decode(
        self,
        logits: np.ndarray,
        beam_width: Optional[int] = ...,
        beam_prune_logp: Optional[float] = ...,
        token_min_logp: Optional[float] = ...,
        hotwords: Optional[Iterable[str]] = ...,
        hotword_weight: Optional[float] = ...,
        alpha: Optional[float] = ...,
        beta: Optional[float] = ...,
        unk_score_offset: Optional[float] = ...,
        lm_score_boundary: Optional[bool] = ...,
        output_word_offsets: bool = ...,
        n_best: int = ...,
    ): ...
    @contextmanager
    def as_target_processor(self): ...

__all__ = ["Wav2Vec2ProcessorWithLM"]
