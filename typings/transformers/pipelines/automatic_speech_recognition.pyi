"""
This type stub file was generated by pyright.
"""

import numpy as np
import torch
from typing import Any, Optional, TYPE_CHECKING, Union
from ..tokenization_utils import PreTrainedTokenizer
from ..utils import is_torch_available
from .base import ChunkPipeline
from pyctcdecode import BeamSearchDecoderCTC
from ..feature_extraction_sequence_utils import SequenceFeatureExtractor
from ..modeling_utils import PreTrainedModel

if TYPE_CHECKING: ...
logger = ...
if is_torch_available(): ...

def rescale_stride(stride, ratio): ...
def chunk_iter(inputs, feature_extractor, chunk_len, stride_left, stride_right, dtype=...): ...

class AutomaticSpeechRecognitionPipeline(ChunkPipeline):
    _pipeline_calls_generate = ...
    _load_processor = ...
    _load_image_processor = ...
    _load_feature_extractor = ...
    _load_tokenizer = ...
    _default_generation_config = ...
    def __init__(
        self,
        model: PreTrainedModel,
        feature_extractor: Union[SequenceFeatureExtractor, str] = ...,
        tokenizer: Optional[PreTrainedTokenizer] = ...,
        decoder: Optional[Union[BeamSearchDecoderCTC, str]] = ...,
        device: Union[int, torch.device] = ...,
        torch_dtype: Optional[Union[str, torch.dtype]] = ...,
        **kwargs,
    ) -> None: ...
    def __call__(self, inputs: Union[np.ndarray, bytes, str, dict], **kwargs: Any) -> list[dict[str, Any]]: ...
    def preprocess(self, inputs, chunk_length_s=..., stride_length_s=...): ...
    def postprocess(
        self, model_outputs, decoder_kwargs: Optional[dict] = ..., return_timestamps=..., return_language=...
    ): ...
