"""
This type stub file was generated by pyright.
"""

import numpy as np
from typing import Any, Union, overload
from ..utils import add_end_docstrings, is_tf_available, is_torch_available
from .base import GenericTensor, Pipeline, build_pipeline_init_args

if is_tf_available(): ...
if is_torch_available(): ...
logger = ...

@add_end_docstrings(
    build_pipeline_init_args(has_tokenizer=True),
    r"""
        top_k (`int`, *optional*, defaults to 5):
            The number of predictions to return.
        targets (`str` or `list[str]`, *optional*):
            When passed, the model will limit the scores to the passed targets instead of looking up in the whole
            vocab. If the provided targets are not in the model vocab, they will be tokenized and the first resulting
            token will be used (with a warning, and that might be slower).
        tokenizer_kwargs (`dict`, *optional*):
            Additional dictionary of keyword arguments passed along to the tokenizer.""",
)
class FillMaskPipeline(Pipeline):
    _load_processor = ...
    _load_image_processor = ...
    _load_feature_extractor = ...
    _load_tokenizer = ...
    def get_masked_index(self, input_ids: GenericTensor) -> np.ndarray: ...
    def ensure_exactly_one_mask_token(self, model_inputs: GenericTensor):  # -> None:
        ...
    def preprocess(
        self, inputs, return_tensors=..., tokenizer_kwargs=..., **preprocess_parameters
    ) -> dict[str, GenericTensor]: ...
    def postprocess(self, model_outputs, top_k=..., target_ids=...):  # -> list[Any]:
        ...
    def get_target_ids(self, targets, top_k=...):  # -> NDArray[Any]:
        ...
    @overload
    def __call__(self, inputs: str, **kwargs: Any) -> list[dict[str, Any]]: ...
    @overload
    def __call__(self, inputs: list[str], **kwargs: Any) -> list[list[dict[str, Any]]]: ...
    def __call__(self, inputs: str | list[str], **kwargs: Any) -> list[dict[str, Any]] | list[list[dict[str, Any]]]:
        """
        Fill the masked token in the text(s) given as inputs.

        Args:
            inputs (`str` or `list[str]`):
                One or several texts (or one list of prompts) with masked tokens.
            targets (`str` or `list[str]`, *optional*):
                When passed, the model will limit the scores to the passed targets instead of looking up in the whole
                vocab. If the provided targets are not in the model vocab, they will be tokenized and the first
                resulting token will be used (with a warning, and that might be slower).
            top_k (`int`, *optional*):
                When passed, overrides the number of predictions to return.

        Return:
            A list or a list of list of `dict`: Each result comes as list of dictionaries with the following keys:

            - **sequence** (`str`) -- The corresponding input with the mask token prediction.
            - **score** (`float`) -- The corresponding probability.
            - **token** (`int`) -- The predicted token id (to replace the masked one).
            - **token_str** (`str`) -- The predicted token (to replace the masked one).
        """
        ...
