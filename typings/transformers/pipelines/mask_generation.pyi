from typing import TYPE_CHECKING, Any, overload

from PIL import Image

from ..utils import is_torch_available
from .base import ChunkPipeline

if is_torch_available(): ...
if TYPE_CHECKING: ...
logger = ...

class MaskGenerationPipeline(ChunkPipeline):
    _load_processor = ...
    _load_image_processor = ...
    _load_feature_extractor = ...
    _load_tokenizer = ...
    def __init__(self, **kwargs) -> None: ...
    @overload
    def __call__(self, image: str | Image.Image, *args: Any, **kwargs: Any) -> dict[str, Any]: ...
    @overload
    def __call__(self, image: list[str] | list[Image.Image], *args: Any, **kwargs: Any) -> list[dict[str, Any]]: ...
    def __call__(
        self, image: str | Image.Image | list[str] | list[Image.Image], *args: Any, **kwargs: Any
    ) -> dict[str, Any] | list[dict[str, Any]]: ...
    def preprocess(
        self,
        image,
        points_per_batch=...,
        crops_n_layers: int = ...,
        crop_overlap_ratio: float = ...,
        points_per_crop: int | None = ...,
        crop_n_points_downscale_factor: int | None = ...,
        timeout: float | None = ...,
    ):  # -> Generator[dict[str | Any, Any], Any, None]:
        ...
    def postprocess(
        self, model_outputs, output_rle_mask=..., output_bboxes_mask=..., crops_nms_thresh=...
    ):  # -> dict[str | Any, Any | list[Any]]:
        ...
